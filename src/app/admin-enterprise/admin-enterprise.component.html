<p-messages></p-messages>
<p-confirmDialog [style]="{width: '50vw'}" [baseZIndex]="10000"></p-confirmDialog>
<p-divider align="left" type="dashed">

  <div *ngIf="!isEdition"  class="inline-flex align-items-center">
    <i class="pi pi-plus-circle mr-2"></i>
    <b style="margin-left: 5px;">Add {{ constants.VIEWS.ENTERPRISE }}</b>
</div>

<div *ngIf="isEdition" class="inline-flex align-items-center">
  <i class="pi pi-pencil mr-2"></i>
  <b style="margin-left: 5px;">Edit {{ constants.VIEWS.ENTERPRISE }} {{ newEnterprise.id }}</b>
</div>
</p-divider>

<div class="row">
  <div class="col-1">
  </div>
  <div class="col-4">
    <div class="row">
      <div class="p-field">
        <span class="p-float-label">
          <input id="float-input" type="text" pInputText [(ngModel)]="newEnterprise.name"  />
          <!-- <input id="float-input" type="text" pInputText [(ngModel)]="newEnterprise.name" class="ng-dirty ng-invalid mr-2" /> -->
          <label for="float-input">Name</label>
          <!-- <p-message severity="error" text="Name is required"></p-message> -->
        </span>

      </div>

    </div>
    <div class="row" style="  margin-top: 25px;"></div>
    <div class="row">
      <div class="p-field">
        <span class="p-float-label">
          <input id="float-input" type="text" pInputText [(ngModel)]="newEnterprise.phone" />
          <label for="float-input">Phone</label>
        </span>

      </div>
    </div>
  </div>
  <div class="col-3">

    <div class="p-field">
      <span class="p-float-label">
        <textarea  id="float-input" rows="5" cols="30" pInputTextarea [(ngModel)]="newEnterprise.address"></textarea>
        <label for="float-input">Address</label>
      </span>

    </div>
  </div>
  <div class="col-3">
    <p-selectButton  [options]="model.stateOptions" [(ngModel)]="newEnterprise.status" optionLabel="label" optionValue="value"></p-selectButton>
  </div>
  <div class="col-1"></div>
</div>
<div class="row div-button">
  <span class="p-buttonset">
    <button *ngIf="!isEdition" pButton pRipple label="Save" icon="pi pi-save p-button-sm" class="button-success" (click)="validateEnterprise()"></button>
    <button *ngIf="isEdition" pButton pRipple label="Edit" icon="pi pi-pencil p-button-sm" class="button-success" (click)="editEnterprise()"></button>

    <button pButton pRipple label="Cancel" icon="pi pi-times p-button-sm" class="button-cancel" (click)="cancelEnterprise()"></button>
</span>
</div>

<p-table [value]="enterpriseAll" [tableStyle]="{ 'min-width': '60rem' }">
  <ng-template pTemplate="caption">
    <div class="table-header">List of {{ constants.VIEWS.ENTERPRISES }}</div>
  </ng-template>
  <ng-template pTemplate="header">
    <tr>
      <th pSortableColumn="id" style="width: 10%">
        Code <p-sortIcon field="id"></p-sortIcon>
      </th>
      <th pSortableColumn="name" style="width: 20%">
        Name <p-sortIcon field="name"></p-sortIcon>
      </th>
      <th pSortableColumn="address" style="width: 20%">
        Address <p-sortIcon field="address"></p-sortIcon>
      </th>
      <th pSortableColumn="phone" style="width: 10%">
        Phone <p-sortIcon field="phone"></p-sortIcon>
      </th>
      <th pSortableColumn="status" style="width: 10%">
        Status <p-sortIcon field="status"></p-sortIcon>
      </th>
      <th tyle="width:30%">Actions</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-enterprise>
    <tr>
      <td>{{ enterprise.id }}</td>
      <td>{{ enterprise.name }}</td>
      <td>{{ enterprise.address }}</td>
      <td>{{ enterprise.phone }}</td>
      <td>
        <button *ngIf="enterprise.status" disabled="true" pButton pRipple type="button" label="{{constants.ACTIVE_STATE}}" class="p-button-text p-button-success p-button-sm" icon="pi pi-check"></button>
        <button  *ngIf="!enterprise.status" disabled="true" pButton pRipple type="button" label="{{constants.INACTIVE_STATE}}" class="p-button-text p-button-secondary p-button-sm" icon="pi pi-times"></button>
      </td>
      <td>
        <button pButton pRipple (click)="goToEdit(enterprise)" type="button" icon="pi pi-pencil" class="p-button-rounded p-button-warning p-button-sm"></button>
        <button *ngIf="!enterprise.status" pButton pRipple type="button" icon="pi pi-check" class="p-button-rounded p-button-success p-button-sm"></button>
        <button *ngIf="enterprise.status"pButton pRipple type="button" icon="pi pi-times" class="p-button-rounded p-button-secondary p-button-sm"></button>
        <button pButton pRipple type="button" icon="pi pi-trash" class="p-button-rounded p-button-danger" p-button-sm></button>
      </td>
    </tr>
  </ng-template>
</p-table>
